<mat-dialog-content>

    <div style="font-size: 18px">Ajout nouveau concours</div>
    <form class="flex flex-col mt-8 p-8 pb-4 bg-card rounded-2xl shadow overflow-hidden">
        <div class="flex flex-col gt-xs:flex-row">
            <mat-form-field

                class="flex-auto gt-xs:pr-3">
                <mat-label>Nom du concours</mat-label>
                <input matInput
                       [(ngModel)]="concours.name"
                       name="name">
                <mat-icon
                    class="icon-size-5"
                    matSuffix
                    [svgIcon]="'heroicons_solid:document-text'"></mat-icon>
            </mat-form-field>

        </div>


        <div class="flex">
            <mat-form-field
                class="fuse-mat-textarea flex-auto">
                <mat-label>Description</mat-label>
                <textarea
                    [(ngModel)]="concours.description"
                    name="description"
                    matInput
                    cdkTextareaAutosize
                    cdkAutosizeMinRows="3"></textarea>
                <mat-icon
                    class="icon-size-5"
                    matSuffix
                    [svgIcon]="'heroicons_solid:document-text'"></mat-icon>
            </mat-form-field>
        </div>

        <div class="flex">
            <mat-form-field
                class="fuse-mat-textarea flex-auto">
                <mat-label>Frais de dépôt des dossiers</mat-label>
                <textarea
                    [(ngModel)]="concours.frais"
                    type="number"
                    name="description"
                    matInput
                    cdkTextareaAutosize
                    cdkAutosizeMinRows="3"></textarea>
                <mat-icon
                    class="icon-size-5"
                    matSuffix
                    [svgIcon]="'heroicons_solid:document-text'"></mat-icon>
            </mat-form-field>
        </div>

        <div class="flex">
            <mat-form-field
                class="fuse-mat-textarea flex-auto">
                <mat-label>Dossiers recommendés</mat-label>
                <input matInput name="dossier" [(ngModel)]="dossier">
                <button (click)="ckeckDossier()" mat-mini-fab color="primary">
                    <mat-icon>add</mat-icon>
                </button>
            </mat-form-field>
        </div>

        <mat-selection-list #shoes [multiple]="false">
            <mat-list-option (click)="removeDossier(i)" matTooltip="Supprimer de la liste" class="list" *ngFor="let dos of dossiers; let i=index;"
                             [value]="dos">
                {{dos}}
            </mat-list-option>
        </mat-selection-list>

        <div class="flex">
            <button (click)="getPhoto()"
                    class="ml-4 px-1 sm:px-4 min-w-10 btnSave"
                    mat-flat-button
            >
                <mat-icon
                    class="icon-size-5"
                    [svgIcon]="'heroicons_solid:photograph'"></mat-icon>
                <span class="hidden sm:inline-block ml-2">Importer une image</span>
            </button>

            <image-cropper
                style="width: 300px; height: 300px;"
                [imageFile]="imageFile"
                [maintainAspectRatio]="false"
                [format]="'jpeg'"
                [imageQuality]=20
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded($event)"
                (cropperReady)="cropperReady()"
                (loadImageFailed)="loadImageFailed()"
            ></image-cropper>

            <img style="width: 300px; height: 300px;" [src]="croppedImage"/>
        </div>
    </form>

    <button
        (click)="saveConcours()"
        class="ml-4 px-1 sm:px-4 min-w-10 btnSave"
        mat-flat-button
        [color]="'primary'"
    >
        <mat-icon
            class="icon-size-5"
            [svgIcon]="'heroicons_solid:save'"></mat-icon>
        <span class="hidden sm:inline-block ml-2">Enregistrer</span>
        <mat-progress-spinner
            *ngIf="saving == true"
            [diameter]="24"
            [mode]="'indeterminate'"></mat-progress-spinner>
    </button>
    <fuse-alert
        class="mt-8 -mb-4"
        *ngIf="showAlert"
        [appearance]="'outline'"
        [showIcon]="false"
        [type]="alert.type"
        [@shake]="alert.type === 'error'">
        {{alert.message}}
    </fuse-alert>
</mat-dialog-content>
